<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–≤–∞–¥—Ä–æ—Ü–∏–∫–ª—ã - Offroad-Shop</title>
    <link rel="stylesheet" href="styles.css"> <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Ç–µ –∂–µ —Å—Ç–∏–ª–∏, —á—Ç–æ –∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ -->
    <style>
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ */
        .add-product-form {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .add-product-form h3 {
            margin-bottom: 20px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group input, .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }

        .add-product-btn {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
        }

        .add-product-btn:hover {
            background-color: #45a049;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ */
        .message {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            text-align: center;
        }

        .success {
            background-color: #dff0d8;
            color: #3c763d;
            border: 1px solid #d6e9c6;
        }

        .error {
            background-color: #f2dede;
            color: #a94442;
            border: 1px solid #ebccd1;
        }
    </style>
</head>
<body>
    <!-- –®–∞–ø–∫–∞ (Header) -->
    <header>
        <div class="logo">Offroad-Shop</div>
        <nav>
            <button class="nav-btn" onclick="window.location.href='index.html'">–ì–ª–∞–≤–Ω–∞—è</button>
            <button class="nav-btn" onclick="window.location.href='buggies.html'">–ë–∞–≥–≥–∏</button>
            <button class="nav-btn" onclick="window.location.href='snowmobiles.html'">–°–Ω–µ–≥–æ—Ö–æ–¥—ã</button>
            <button class="nav-btn" onclick="window.location.href='jetskis.html'">–ì–∏–¥—Ä–æ—Ü–∏–∫–ª—ã</button>
        </nav>
        <div class="user-panel">
            <button class="icon-btn">üîç</button>
            <button class="icon-btn" onclick="window.location.href='cart.html'">üõí<span class="cart-count">3</span></button>
            <button class="auth-btn" onclick="window.location.href='login.html'">–í—Ö–æ–¥</button>
        </div>
    </header>

    <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ -->
    <section class="add-product-form">
        <h3>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–≤–∞–¥—Ä–æ—Ü–∏–∫–ª</h3>
        <form id="addProductForm">
            <div class="form-group">
                <label for="name">–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                <input type="text" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <textarea id="description" name="description" required></textarea>
            </div>
            <div class="form-group">
                <label for="price">–¶–µ–Ω–∞ (—Ä—É–±.):</label>
                <input type="number" id="price" name="price" step="0.01" required>
            </div>
            <div class="form-group">
                <label for="stock_quantity">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –Ω–∞–ª–∏—á–∏–∏:</label>
                <input type="number" id="stock_quantity" name="stock_quantity" required>
            </div>
            <div class="form-group">
                <label for="image_url">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:</label>
                <input type="url" id="image_url" name="image_url" required>
            </div>
            <button type="submit" class="add-product-btn">–î–æ–±–∞–≤–∏—Ç—å –∫–≤–∞–¥—Ä–æ—Ü–∏–∫–ª</button>
        </form>
        <div id="message"></div>
    </section>

    <!-- –°–ø–∏—Å–æ–∫ –∫–≤–∞–¥—Ä–æ—Ü–∏–∫–ª–æ–≤ -->
    <section class="atv-list">
        <h2>–ö–≤–∞–¥—Ä–æ—Ü–∏–∫–ª—ã</h2>
        <div class="items-grid" id="productsGrid">
            <!-- –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </div>
    </section>

    <!-- –ü–æ–¥–≤–∞–ª (Footer) -->
    <footer>
        <div class="footer-section">
            <p>–¢–µ–ª–µ—Ñ–æ–Ω: +7 (999) 123-45-67<br>Email: info@offroadshop.ru</p>
        </div>
        <div class="footer-section">
            <a href="#">–û –Ω–∞—Å</a> | <a href="#">–î–æ—Å—Ç–∞–≤–∫–∞</a> | <a href="#">–í–æ–∑–≤—Ä–∞—Ç</a>
        </div>
        <div class="footer-section">
            <button class="social-btn">VK</button>
            <button class="social-btn">IG</button>
            <button class="social-btn">FB</button>
        </div>
    </footer>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
        async function loadProducts() {
            try {
                const response = await fetch('http://localhost:5000/api/products');
                const products = await response.json();
                const productsGrid = document.getElementById('productsGrid');
                productsGrid.innerHTML = ''; // –û—á–∏—â–∞–µ–º —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫

                products.forEach(product => {
                    const productCard = `
                        <div class="item-card">
                            <img src="${product.image_url}" alt="${product.name}">
                            <h3>${product.name}</h3>
                            <p class="description">${product.description}</p>
                            <p class="price">${product.price.toLocaleString('ru-RU')} —Ä—É–±.</p>
                            <button class="add-to-cart">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
                        </div>
                    `;
                    productsGrid.innerHTML += productCard;
                });
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ç–æ–≤–∞—Ä–æ–≤:', error);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è
        function showMessage(text, isError = false) {
            const messageDiv = document.getElementById('message');
            messageDiv.className = `message ${isError ? 'error' : 'success'}`;
            messageDiv.textContent = text;
            setTimeout(() => {
                messageDiv.textContent = '';
                messageDiv.className = '';
            }, 3000);
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
        document.getElementById('addProductForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = {
                name: document.getElementById('name').value,
                description: document.getElementById('description').value,
                price: parseFloat(document.getElementById('price').value),
                stock_quantity: parseInt(document.getElementById('stock_quantity').value),
                image_url: document.getElementById('image_url').value
            };

            try {
                const response = await fetch('http://localhost:5000/api/products', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });

                if (response.ok) {
                    showMessage('–¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!');
                    document.getElementById('addProductForm').reset();
                    loadProducts(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
                } else {
                    const error = await response.json();
                    showMessage(error.error || '–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞', true);
                }
            } catch (error) {
                showMessage('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö', true);
                console.error('–û—à–∏–±–∫–∞:', error);
            }
        });

        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–≤–∞—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', loadProducts);
    </script>
</body>
</html>